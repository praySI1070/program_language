<x-app-layout>
    <script src="{{ asset('/js/jszip.min.js') }}"></script>
    <!--pray ë¼ì´ë¸ŒëŸ¬ë¦¬ì„¤ì¹˜-->
    <script src="https://unpkg.com/konva@10/konva.min.js"></script>
    <div class="py-12 px-3">
        <div class="max-w-7xl mx-auto sm:px-6 lg:px-8">
            <div class="container mx-auto px-4 py-8 max-w-6xl">
                <header class="text-center mb-12">
                    <h1 class="text-4xl font-bold text-gray-800 mb-4">ğŸ“¸ ì¸ë„¤ì¼ í¸ì§‘ê¸°</h1>
                    <p class="text-lg text-gray-600">ë¬´ë£Œ ì˜¨ë¼ì¸ ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì¦ˆ ë„êµ¬ - ë“œë˜ê·¸ ì•¤ ë“œë¡­ìœ¼ë¡œ ì‰½ê²Œ ì¸ë„¤ì¼ ìƒì„±</p>
                </header>

                <main class="space-y-8">
                    <!-- íŒŒì¼ ì—…ë¡œë“œ ì„¹ì…˜ -->
                    <section class="bg-white rounded-lg shadow-lg p-6" aria-labelledby="upload-heading">
                        <h2 id="upload-heading" class="sr-only">ì´ë¯¸ì§€ ì—…ë¡œë“œ</h2>
                        <div class="upload-area border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-blue-400 transition-colors cursor-pointer" id="uploadArea" role="button" aria-label="ì´ë¯¸ì§€ íŒŒì¼ ì—…ë¡œë“œ ì˜ì—­">
                            <div class="upload-content">
                                <div class="text-6xl mb-4" role="img" aria-label="í´ë” ì•„ì´ì½˜">ğŸ“</div>
                                <h3 class="text-xl font-semibold text-gray-700 mb-2">ì´ë¯¸ì§€ íŒŒì¼ì„ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì—…ë¡œë“œ</h3>
                                <p class="text-gray-500 mb-4">JPG, PNG, GIF, WebP íŒŒì¼ì„ ì§€ì›í•©ë‹ˆë‹¤</p>
                                <input type="file" name="files[]" id="fileInput" multiple accept="image/*" class="hidden" aria-label="ì´ë¯¸ì§€ íŒŒì¼ ì„ íƒ">
                                <button class="bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-6 rounded-lg transition-colors" id="uploadBtn" aria-label="íŒŒì¼ ì„ íƒ ë²„íŠ¼">
                                    íŒŒì¼ ì„ íƒ
                                </button>
                            </div>
                        </div>
                    </section>

                    <!-- ì‚¬ì´ì¦ˆ ì„¤ì • ì„¹ì…˜ -->
                    <section class="bg-white rounded-lg shadow-lg p-6" aria-labelledby="resize-heading">
                        <h2 id="resize-heading" class="text-xl font-semibold text-gray-800 mb-6">ë¦¬ì‚¬ì´ì¦ˆ ì„¤ì •</h2>
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                            <div class="space-y-2">
                                <label for="width" class="block text-sm font-medium text-gray-700">ë„ˆë¹„ (px)</label>
                                <input type="number" id="width" value="1000" min="1" max="4000" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" aria-describedby="width-help">
                                <span id="width-help" class="sr-only">ì´ë¯¸ì§€ì˜ ë„ˆë¹„ë¥¼ í”½ì…€ ë‹¨ìœ„ë¡œ ì…ë ¥í•˜ì„¸ìš”</span>
                            </div>
                            <div class="space-y-2">
                                <label for="height" class="block text-sm font-medium text-gray-700">ë†’ì´ (px)</label>
                                <input type="number" id="height" value="1000" min="1" max="4000" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" aria-describedby="height-help">
                                <span id="height-help" class="sr-only">ì´ë¯¸ì§€ì˜ ë†’ì´ë¥¼ í”½ì…€ ë‹¨ìœ„ë¡œ ì…ë ¥í•˜ì„¸ìš”</span>
                            </div>
                            <div class="space-y-3">
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="checkbox" id="maintainRatio" checked class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500" aria-describedby="ratio-help">
                                    <span class="text-sm font-medium text-gray-700">ë¹„ìœ¨ ìœ ì§€</span>
                                </label>
                                <span id="ratio-help" class="sr-only">ì²´í¬í•˜ë©´ ì›ë³¸ ì´ë¯¸ì§€ì˜ ê°€ë¡œì„¸ë¡œ ë¹„ìœ¨ì„ ìœ ì§€í•©ë‹ˆë‹¤</span>
                                <fieldset class="space-y-2">
                                    <legend class="text-sm font-medium text-gray-700">ë¦¬ì‚¬ì´ì¦ˆ ëª¨ë“œ</legend>
                                    <label class="flex items-center space-x-2 cursor-pointer">
                                        <input type="radio" name="resizeMode" value="crop" checked class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500">
                                        <span class="text-xs text-gray-600">í¬ë¡­ (ê°€ìš´ë° ì •ë ¬)</span>
                                    </label>
                                    <label class="flex items-center space-x-2 cursor-pointer">
                                        <input type="radio" name="resizeMode" value="stretch" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500">
                                        <span class="text-xs text-gray-600">ëŠ˜ì´ê¸°</span>
                                    </label>
                                </fieldset>
                            </div>
                            <div class="space-y-3">
                                <fieldset class="space-y-2">
                                    <legend class="text-sm font-medium text-gray-700">ì´ë¯¸ì§€ í’ˆì§ˆ</legend>
                                    <label class="flex items-center space-x-2 cursor-pointer">
                                        <input type="radio" name="imageQuality" value="high" checked class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500">
                                        <span class="text-xs text-gray-600">ê³ í’ˆì§ˆ (PNG)</span>
                                    </label>
                                    <label class="flex items-center space-x-2 cursor-pointer">
                                        <input type="radio" name="imageQuality" value="web" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500">
                                        <span class="text-xs text-gray-600">ì›¹ìš© (JPG 80%)</span>
                                    </label>
                                    <label class="flex items-center space-x-2 cursor-pointer">
                                        <input type="radio" name="imageQuality" value="optimized" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500">
                                        <span class="text-xs text-gray-600">ìµœì í™” (JPG 60%)</span>
                                    </label>
                                </fieldset>
                            </div>
                        </div>
                        <div class="border-t pt-6">
                            <h3 class="text-lg font-medium text-gray-800 mb-4">í”„ë¦¬ì…‹ í¬ê¸°</h3>
                            <div class="flex flex-wrap gap-2" role="group" aria-label="í”„ë¦¬ì…‹ í¬ê¸° ë²„íŠ¼ë“¤">
                                <button class="preset-btn bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-2 px-4 rounded-lg transition-colors" data-width="150" data-height="150" aria-label="150x150 í”½ì…€ë¡œ ì„¤ì •">150x150</button>
                                <button class="preset-btn bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-2 px-4 rounded-lg transition-colors" data-width="300" data-height="300" aria-label="300x300 í”½ì…€ë¡œ ì„¤ì •">300x300</button>
                                <button class="preset-btn bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-2 px-4 rounded-lg transition-colors" data-width="500" data-height="500" aria-label="500x500 í”½ì…€ë¡œ ì„¤ì •">500x500</button>
                                <button class="preset-btn bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-2 px-4 rounded-lg transition-colors" data-width="1000" data-height="1000" aria-label="1000x1000 í”½ì…€ë¡œ ì„¤ì •">1000x1000</button>
                                <button class="preset-btn bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-2 px-4 rounded-lg transition-colors" data-width="1920" data-height="1080" aria-label="1920x1080 í”½ì…€ë¡œ ì„¤ì •">1920x1080</button>
                                <button class="preset-btn bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-2 px-4 rounded-lg transition-colors" data-width="1280" data-height="720" aria-label="1280x720 í”½ì…€ë¡œ ì„¤ì •">1280x720</button>
                            </div>
                        </div>
                    </section>
                    <!--pray ìŠ¤í¬ë¡¤ ì•µì»¤-->
                    <div id="test"></div>
                    <!-- ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° ë° ì²˜ë¦¬ ì„¹ì…˜ -->
                    <section class="bg-white rounded-lg shadow-lg p-6 hidden" id="previewSection" aria-labelledby="preview-heading">
                        <h2 id="preview-heading" class="text-xl font-semibold text-gray-800 mb-6">ì—…ë¡œë“œëœ ì´ë¯¸ì§€</h2>
                        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6" id="imagesGrid" role="grid" aria-label="ì—…ë¡œë“œëœ ì´ë¯¸ì§€ ëª©ë¡"></div>
                        <div class="flex flex-wrap gap-3 justify-center" role="group" aria-label="ì´ë¯¸ì§€ ì²˜ë¦¬ ë²„íŠ¼ë“¤">
                            <button class="bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-6 rounded-lg transition-colors" id="resizeBtn" aria-label="ëª¨ë“  ì´ë¯¸ì§€ë¥¼ ì„¤ì •ëœ í¬ê¸°ë¡œ ë¦¬ì‚¬ì´ì¦ˆ">ëª¨ë“  ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì¦ˆ</button>
                            <button class="bg-green-500 hover:bg-green-600 text-white font-medium py-2 px-6 rounded-lg transition-colors hidden" id="downloadAllBtn" aria-label="ëª¨ë“  ë¦¬ì‚¬ì´ì¦ˆëœ ì´ë¯¸ì§€ë¥¼ ZIP íŒŒì¼ë¡œ ë‹¤ìš´ë¡œë“œ">ZIPìœ¼ë¡œ ë‹¤ìš´ë¡œë“œ</button>
                            <button class="bg-red-500 hover:bg-red-600 text-white font-medium py-2 px-6 rounded-lg transition-colors" id="clearBtn" aria-label="ëª¨ë“  ì´ë¯¸ì§€ ì‚­ì œ">ëª¨ë‘ ì§€ìš°ê¸°</button>
                        </div>
                    </section>

                    <!-- ì²˜ë¦¬ëœ ì´ë¯¸ì§€ ì„¹ì…˜ -->
                    <section class="bg-white rounded-lg shadow-lg p-6 hidden" id="processedSection" aria-labelledby="processed-heading">
                        <h2 id="processed-heading" class="text-xl font-semibold text-gray-800 mb-6">ë¦¬ì‚¬ì´ì¦ˆëœ ì´ë¯¸ì§€</h2>
                        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4" id="processedGrid" role="grid" aria-label="ë¦¬ì‚¬ì´ì¦ˆëœ ì´ë¯¸ì§€ ëª©ë¡"></div>
                    </section>
                </main>
            </div>

            <!-- ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° ëª¨ë‹¬ -->
            <div id="imagePreviewModal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 hidden" role="dialog" aria-labelledby="modal-title" aria-modal="true">
                <div class="bg-white rounded-lg p-6 max-w-4xl max-h-[90vh] overflow-auto m-4">
                    <div class="flex justify-between items-center mb-4">
                        <h3 id="modal-title" class="text-xl font-semibold text-gray-800">ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸°</h3>
                        <button id="closeModal" class="text-gray-500 hover:text-gray-700 text-2xl font-bold" aria-label="ë¯¸ë¦¬ë³´ê¸° ë‹«ê¸°">
                            Ã—
                        </button>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="text-center">
                            <h4 class="text-lg font-medium text-gray-700 mb-3">ì›ë³¸ ì´ë¯¸ì§€</h4>
                            <div class="border border-gray-300 rounded-lg p-4 bg-gray-50">
                                <img id="originalPreview" src="" alt="ì›ë³¸ ì´ë¯¸ì§€" class="max-w-full max-h-64 mx-auto object-contain">
                                <p id="originalInfo" class="text-sm text-gray-600 mt-2"></p>
                            </div>
                        </div>
                        <div class="text-center">
                            <h4 class="text-lg font-medium text-gray-700 mb-3">ë¦¬ì‚¬ì´ì¦ˆëœ ì´ë¯¸ì§€</h4>
                            <div class="border border-gray-300 rounded-lg p-4 bg-gray-50">
                                <img id="resizedPreview" src="" alt="ë¦¬ì‚¬ì´ì¦ˆëœ ì´ë¯¸ì§€" class="max-w-full max-h-64 mx-auto object-contain">
                                <p id="resizedInfo" class="text-sm text-gray-600 mt-2"></p>
                            </div>
                        </div>
                    </div>
                    <div class="mt-6 flex justify-center space-x-4">
                        <button id="downloadPreviewImage" class="bg-green-500 hover:bg-green-600 text-white font-medium py-2 px-6 rounded-lg transition-colors">
                            ì´ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ
                        </button>
                        <button id="closeModal2" class="bg-gray-500 hover:bg-gray-600 text-white font-medium py-2 px-6 rounded-lg transition-colors">
                            ë‹«ê¸°
                        </button>
                    </div>
                </div>
            </div>

            <!--pray1070 2025-09-25 ìˆ˜ì •ë²„íŠ¼ ëª¨ë‹¬-->
            <div id="editModal"  class="fixed p-6 inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 hidden" role="dialog" aria-labelledby="eidt-modal-title" aria-modal="true">
                <div class="bg-white rounded-lg p-6 w-full h-full overflow-auto m-4 flex flex-col">
                    <div class="flex justify-between items-center mb-4">
                        <h3 id="modal-title" class="text-xl font-semibold text-gray-800">ì´ë¯¸ì§€ ìˆ˜ì • </h3>
                        <div><button id="stagePlus" class="w-8 border">+</button>ìŠ¤í…Œì´ì§€<button id="stageMinus" class="w-8 border">-</button></div>
                        <div><button id="imagePlus" class="w-8 border">+</button>ì´ë¯¸ì§€<button id="imageMinus" class="w-8 border">-</button></div>
                        <button id="editcloseModalBtn" class="text-gray-500 hover:text-gray-700 text-2xl font-bold" aria-label="ìˆ˜ì • ë¯¸ë¦¬ë³´ê¸° ë‹«ê¸°">
                            Ã—
                        </button>
                    </div>
                    
                        
                    <div id="editContainer" class="flex bg-yellow-200 overflow-auto items-center justify-center gap-6 flex-1" ></div>
                        
                    
                    <div class="mt-6 flex justify-center space-x-4">
                        <button id="editSaveBtn" class="bg-green-500 hover:bg-green-600 text-white font-medium py-2 px-6 rounded-lg transition-colors">
                            ì €ì¥
                        </button>
                        <button id="editcloseModalBtn_footer" class="bg-gray-500 hover:bg-gray-600 text-white font-medium py-2 px-6 rounded-lg transition-colors">
                            ë‹«ê¸°
                        </button>
                    </div>
                </div>
            </div>


            <script>
                class ThumbnailEditor {
                    constructor() {
                        this.uploadedImages = [];
                        this.processedImages = [];
                        this.initializeElements();
                        this.bindEvents();
                    }

                    initializeElements() {
                        this.uploadArea = document.getElementById('uploadArea');
                        this.uploadBtn = document.getElementById('uploadBtn');
                        this.fileInput = document.getElementById('fileInput');
                        this.widthInput = document.getElementById('width');
                        this.heightInput = document.getElementById('height');
                        this.maintainRatioCheckbox = document.getElementById('maintainRatio');
                        this.resizeModeRadios = document.querySelectorAll('input[name="resizeMode"]');
                        this.previewSection = document.getElementById('previewSection');
                        this.processedSection = document.getElementById('processedSection');
                        this.imagesGrid = document.getElementById('imagesGrid');
                        this.processedGrid = document.getElementById('processedGrid');
                        this.resizeBtn = document.getElementById('resizeBtn');
                        this.downloadAllBtn = document.getElementById('downloadAllBtn');
                        this.clearBtn = document.getElementById('clearBtn');
                        this.presetButtons = document.querySelectorAll('.preset-btn');

                        // ë¯¸ë¦¬ë³´ê¸° ëª¨ë‹¬ ìš”ì†Œë“¤
                        this.imagePreviewModal = document.getElementById('imagePreviewModal');
                        this.closeModalBtn = document.getElementById('closeModal');
                        this.closeModal2Btn = document.getElementById('closeModal2');
                        this.originalPreview = document.getElementById('originalPreview');
                        this.resizedPreview = document.getElementById('resizedPreview');
                        this.originalInfo = document.getElementById('originalInfo');
                        this.resizedInfo = document.getElementById('resizedInfo');
                        this.downloadPreviewImageBtn = document.getElementById('downloadPreviewImage');

                        //pray1070 2025-09-25 ìˆ˜ì •ë²„íŠ¼
                        this.editModal = document.getElementById('editModal');
                        this.closeBtn = document.getElementById('editcloseModalBtn');
                        this.closeBtnFooter = document.getElementById('editcloseModalBtn_footer');
                        this.editSaveBtn = document.getElementById('editSaveBtn');
                        //pray1070 2025-09-26 kovas
                        this.editContainer = document.getElementById('editContainer');
                        

                        this.stage = new Konva.Stage({
                        container: 'editContainer',
                        width: 100,
                        height: 100,
                        scaleX: 1.0, // Xì¶•ì„ í™•ëŒ€
                        scaleY: 1.0  // Yì¶•ì„ í™•ëŒ€
                        });


                        

                        this.layer = new Konva.Layer();
                        this.imageObj = new Image();
                        
                        this.stagePlus = document.getElementById('stagePlus');
                        this.stageMinus = document.getElementById('stageMinus');
                        this.imagePlus = document.getElementById('imagePlus');
                        this.imageMinus = document.getElementById('imageMinus');

                        this.imagearray = {};
                        

                        //pray END

                        this.currentPreviewData = null;
                    }

                    bindEvents() {
                        // íŒŒì¼ ì…ë ¥ ì´ë²¤íŠ¸
                        this.fileInput.addEventListener('change', (e) => this.handleFileSelect(e));

                        // ì—…ë¡œë“œ ë²„íŠ¼ ì´ë²¤íŠ¸ (ì´ë²¤íŠ¸ ë²„ë¸”ë§ ë°©ì§€)
                        this.uploadBtn.addEventListener('click', (e) => {
                            e.stopPropagation();
                            this.fileInput.click();
                        });

                        // ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì´ë²¤íŠ¸ (ì—…ë¡œë“œ ì˜ì—­ì—ë§Œ)
                        this.uploadArea.addEventListener('dragover', (e) => this.handleDragOver(e));
                        this.uploadArea.addEventListener('dragleave', (e) => this.handleDragLeave(e));
                        this.uploadArea.addEventListener('drop', (e) => this.handleDrop(e));

                        // ì—…ë¡œë“œ ì˜ì—­ í´ë¦­ ì´ë²¤íŠ¸ (ë²„íŠ¼ì´ ì•„ë‹Œ ì˜ì—­ë§Œ)
                        this.uploadArea.addEventListener('click', (e) => {
                            // ë²„íŠ¼ í´ë¦­ì´ ì•„ë‹Œ ê²½ìš°ì—ë§Œ íŒŒì¼ ì„ íƒ ì°½ ì—´ê¸°
                            if (e.target !== this.uploadBtn && !this.uploadBtn.contains(e.target)) {
                                this.fileInput.click();
                            }
                        });

                        // ì‚¬ì´ì¦ˆ ì…ë ¥ ì´ë²¤íŠ¸
                        this.widthInput.addEventListener('input', () => this.handleSizeChange('width'));
                        this.heightInput.addEventListener('input', () => this.handleSizeChange('height'));


                        // í”„ë¦¬ì…‹ ë²„íŠ¼ ì´ë²¤íŠ¸
                        this.presetButtons.forEach(btn => {
                            btn.addEventListener('click', () => this.setPresetSize(btn));
                        });

                        // ì•¡ì…˜ ë²„íŠ¼ ì´ë²¤íŠ¸
                        this.resizeBtn.addEventListener('click', () => this.resizeAllImages());
                        this.downloadAllBtn.addEventListener('click', () => this.downloadAllImages());
                        this.clearBtn.addEventListener('click', () => this.clearAllImages());

                        // ë¯¸ë¦¬ë³´ê¸° ëª¨ë‹¬ ì´ë²¤íŠ¸
                        this.closeModalBtn.addEventListener('click', () => this.closePreviewModal());
                        this.closeModal2Btn.addEventListener('click', () => this.closePreviewModal());
                        this.downloadPreviewImageBtn.addEventListener('click', () => this.downloadCurrentPreviewImage());

                        // ëª¨ë‹¬ ë°°ê²½ í´ë¦­ ì‹œ ë‹«ê¸°
                        this.imagePreviewModal.addEventListener('click', (e) => {
                            if (e.target === this.imagePreviewModal) {
                                this.closePreviewModal();
                            }
                        });

                        //pray1070 2025-09-25 ìˆ˜ì •ë²„íŠ¼
                        this.closeBtn.addEventListener('click', ()=> this.closeEditModal());
                        this.closeBtnFooter.addEventListener('click', ()=> this.closeEditModal());
                        this.editModal.addEventListener('click', (e) => {
                            if(e.target === this.editModal) {
                                this.closeEditModal();
                            }
                        })
                        this.stagePlus.addEventListener('click', () => this.stagePlusa());
                        this.stageMinus.addEventListener('click', () => this.stageMinusa());
                        this.imagePlus.addEventListener('click', () => this.imagePlusa());
                        this.imageMinus.addEventListener('click', () => this.imageMinusa());
                        

                        //prayEND

                        // ESC í‚¤ë¡œ ëª¨ë‹¬ ë‹«ê¸°
                        document.addEventListener('keydown', (e) => {
                            if (e.key === 'Escape' && !this.imagePreviewModal.classList.contains('hidden')) {
                                this.closePreviewModal();
                            }
                        });
                    }

                    handleDragOver(e) {
                        e.preventDefault();
                        this.uploadArea.classList.add('border-blue-400', 'bg-blue-50');
                    }

                    handleDragLeave(e) {
                        e.preventDefault();
                        this.uploadArea.classList.remove('border-blue-400', 'bg-blue-50');
                    }

                    handleDrop(e) {
                        e.preventDefault();
                        this.uploadArea.classList.remove('border-blue-400', 'bg-blue-50');
                        const files = Array.from(e.dataTransfer.files).filter(file => file.type.startsWith('image/'));
                        this.processFiles(files);
                    }

                    async handleFileSelect(e) {
                        e.stopPropagation();
                        console.log('íŒŒì¼ ì„ íƒë¨:', e.target.files.length, 'ê°œ');
                        const files = Array.from(e.target.files);

                        //pray ìŠ¤í¬ë¡¤
                        document.getElementById('test').scrollIntoView({behavior: "smooth", block: "start"});

                        if (files.length > 0) {
                            this.processFiles(files);
                            // íŒŒì¼ ì„ íƒ í›„ input ê°’ ì´ˆê¸°í™” (ê°™ì€ íŒŒì¼ ì¬ì„ íƒ ê°€ëŠ¥í•˜ë„ë¡)
                            e.target.value = '';
                        }
                    }

                    processFiles(files) {
                        files.forEach(file => {
                            if (file.type.startsWith('image/')) {
                                this.addImage(file);
                            }
                        });
                        this.updateUI();
                    }

                    addImage(file) {
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            const img = new Image();
                            img.onload = () => {
                                const imageData = {
                                    id: Date.now() + Math.random(),
                                    file: file,
                                    src: e.target.result,
                                    originalWidth: img.width,
                                    originalHeight: img.height,
                                    name: file.name
                                };
                                this.uploadedImages.push(imageData);
                                this.renderUploadedImages();
                            };
                            img.src = e.target.result;
                        };
                        reader.readAsDataURL(file);
                    }

                    renderUploadedImages() {
                        this.imagesGrid.innerHTML = '';
                        this.uploadedImages.forEach(imageData => {
                            const imageCard = this.createImageCard(imageData, false);
                            this.imagesGrid.appendChild(imageCard);
                        });
                        this.updateUI();
                    }

                    createImageCard(imageData, isProcessed = false) {
                        const card = document.createElement('div');
                        card.className = 'bg-gray-50 rounded-lg p-4 border border-gray-200';
                        card.setAttribute('role', 'gridcell');

                        const img = document.createElement('img');
                        img.src = imageData.src;
                        img.className = 'w-full h-32 object-cover rounded-md mb-3';
                        img.alt = isProcessed
                            ? `ë¦¬ì‚¬ì´ì¦ˆëœ ì´ë¯¸ì§€: ${imageData.name} (${imageData.width}x${imageData.height})`
                            : `ì—…ë¡œë“œëœ ì´ë¯¸ì§€: ${imageData.name} (${imageData.originalWidth}x${imageData.originalHeight})`;
                        img.loading = 'lazy';

                        const info = document.createElement('div');
                        info.className = 'text-sm text-gray-600';

                        const name = document.createElement('p');
                        name.className = 'font-medium truncate mb-1';
                        name.textContent = imageData.name;
                        name.title = imageData.name; // íˆ´íŒìœ¼ë¡œ ì „ì²´ íŒŒì¼ëª… í‘œì‹œ

                        const dimensions = document.createElement('p');
                        dimensions.textContent = `${imageData.originalWidth || imageData.width} Ã— ${imageData.originalHeight || imageData.height}`;
                        dimensions.setAttribute('aria-label', `ì´ë¯¸ì§€ í¬ê¸°: ${imageData.originalWidth || imageData.width} í”½ì…€ ë„ˆë¹„, ${imageData.originalHeight || imageData.height} í”½ì…€ ë†’ì´`);

                        info.appendChild(name);
                        info.appendChild(dimensions);

                        if (isProcessed) {
                            const buttonContainer = document.createElement('div');
                            buttonContainer.className = 'space-y-2';

                            const previewBtn = document.createElement('button');
                            previewBtn.className = 'w-full bg-blue-500 hover:bg-blue-600 text-white text-sm font-medium py-1 px-3 rounded transition-colors';
                            previewBtn.textContent = 'ë¯¸ë¦¬ë³´ê¸°';
                            previewBtn.setAttribute('aria-label', `${imageData.name} ë¯¸ë¦¬ë³´ê¸°`);
                            previewBtn.addEventListener('click', () => this.showImagePreview(imageData));

                            const downloadBtn = document.createElement('button');
                            downloadBtn.className = 'w-full bg-green-500 hover:bg-green-600 text-white text-sm font-medium py-1 px-3 rounded transition-colors';
                            downloadBtn.textContent = 'ë‹¤ìš´ë¡œë“œ';
                            downloadBtn.setAttribute('aria-label', `${imageData.name} ë‹¤ìš´ë¡œë“œ`);
                            downloadBtn.addEventListener('click', () => this.downloadImage(imageData));

                            buttonContainer.appendChild(previewBtn);
                            buttonContainer.appendChild(downloadBtn);
                            info.appendChild(buttonContainer);
                        } else {
                            //pray1070 2025-09-25 ìˆ˜ì •ë²„íŠ¼
                            const editBtn = document.createElement('button');
                            
                            editBtn.className = 'w-full mt-2 bg-blue-500 hover:bg-blue-600 text-white text-sm font-medium py-1 px-3 rounded transition-colors';
                            editBtn.textContent = 'ìˆ˜ì •';
                            editBtn.setAttribute('aria-label', `${imageData.name} ìˆ˜ì •`);
                            editBtn.addEventListener('click', () => this.editImageData(imageData));
                            info.appendChild(editBtn);
                            
                            
                            //
                            const removeBtn = document.createElement('button');
                            removeBtn.className = 'w-full mt-2 bg-red-500 hover:bg-red-600 text-white text-sm font-medium py-1 px-3 rounded transition-colors';
                            removeBtn.textContent = 'ì œê±°';
                            removeBtn.setAttribute('aria-label', `${imageData.name} ì œê±°`);
                            removeBtn.addEventListener('click', () => this.removeImage(imageData.id));
                            info.appendChild(removeBtn);
                        }

                        card.appendChild(img);
                        card.appendChild(info);

                        return card;
                    }

                //pray1070 2025-09-25 ìˆ˜ì •ë²„íŠ¼


                    editImageData(imageData) {
                        //ëª¨ë‹¬ í‚¤ê¸°
                        this.editModal.classList.remove('hidden');
                        this.selectimage = this.uploadedImages.findIndex(img => img.id === imageData);
                        console.log("selectimage", selectimage);

                        //canvas ì˜ì—­ ìƒì„±í›„ ë³´ë”
                        // ì•½ê°„ ê¸°ë‹¤ë¦° í›„ ì‹¤í–‰ (ì˜ˆ: 100ms)
                        setTimeout(() => {
                            const stageborder = document.querySelector('#editContainer canvas');
                            if(stageborder) {
                                stageborder.style.border = '2px solid red';
                                console.log("ìŠ¤í…Œì´ì§€ ë³´ë” ì™„ë£Œ");
                            } else {
                                console.log("canvas ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ");
                            }
                        }, 100);

                        console.log("imageData : ", imageData);
                        let x=0;
                        let y=0;
                        if(this.imagearray[imageData.id]) {
                            x = this.imagearray[imageData.id][0];
                            y = this.imagearray[imageData.id][1];
                        }
                        console.log(this.imagearray);

                        console.log("x : y", imageData['x'],":",imageData['y']);

                        const resizeMode = document.querySelector('input[name="resizeMode"]:checked').value;
                        const imageWidth = imageData.originalWidth;
                        const imageHeight = imageData.originalHeight;
                        const resizeWidth = this.widthInput.value;
                        const resizeHeight = this.heightInput.value;
                        const editContainerWidth = this.editContainer.offsetWidth;
                        const editContainerHeight = this.editContainer.offsetHeight;
                        let barrier = editContainerWidth;
                        if(editContainerWidth > editContainerHeight) {
                            barrier = editContainerHeight;
                        }

                        console.log("editContainerWidth : ",editContainerWidth);
                        this.stage.width(barrier-2);
                        this.stage.height(barrier-2);
                        
                        console.log("stage Width : ", this.stage.width());
                        console.log("stage Height : ", this.stage.height());

                        if(resizeMode == "crop") {

                        }

                        //ì´ë¯¸ì§€ ì¶œë ¥
                        this.imageObj.onload = () => {
                                this.editimage = new Konva.Image({
                                x: x,
                                y: y,
                                image: this.imageObj,
                                width: barrier,
                                height: barrier,
                                draggable: true,
                            });

                            // add cursor styling
                            this.editimage.on('mouseover', function () {
                                document.body.style.cursor = 'pointer';
                            });
                            this.editimage.on('mouseout', function () {
                                document.body.style.cursor = 'default';
                            });
                            
                            this.layer.add(this.editimage);
                            
                            this.layer.draw(); 
                            console.log("editimageX : ", this.editimage.width());
                        };
                        this.imageObj.src = imageData.src;
                        this.stage.add(this.layer);
                        
                        this.stage.on('click', function (e) {
                            const pointerPos = this.getPointerPosition();
                            if (pointerPos) {
                                console.log("í´ë¦­ ìœ„ì¹˜ X:", pointerPos.x);
                                console.log("í´ë¦­ ìœ„ì¹˜ Y:", pointerPos.y);
                            }
                        });
                        
                    }
                    
                    closeEditModal() {
                        // ëª¨ë‹¬ ë„ê¸°
                        this.editModal.classList.add('hidden');
                        this.layer.destroy(this.editimage);

                    }

                    saveImage() {
                        
                        console.log("saveImageBtn");
                        console.log("id : ", id);
                        this.editModal.classList.add('hidden');
                        
                        
                        this.layer.destroy(this.editimage);
                    }

                    stagePlusa() {
                        this.stage.scaleX(this.stage.scaleX() * 1.1);
                        this.stage.scaleY(this.stage.scaleY() * 1.1);
                        console.log("stage", this.stage.width());
                    }
                    stageMinusa() {
                        this.stage.scaleX(this.stage.scaleX() * 0.9);
                        this.stage.scaleY(this.stage.scaleY() * 0.9);
                        console.log("stage", this.stage.width());
                    }
                    imagePlusa() {
                        this.editimage.scaleX(this.editimage.scaleX() * 1.1);
                        this.editimage.scaleY(this.editimage.scaleY() * 1.1);
                    }
                    imageMinusa() {
                        this.editimage.scaleX(this.editimage.scaleX() * 0.9);
                        this.editimage.scaleY(this.editimage.scaleY() * 0.9);
                    }

                    //pray

                    removeImage(id) {
                        this.uploadedImages = this.uploadedImages.filter(img => img.id !== id);
                        this.renderUploadedImages();
                    }

                    handleSizeChange(changedInput) {
                        if (!this.maintainRatioCheckbox.checked) return;

                        const width = parseInt(this.widthInput.value);
                        const height = parseInt(this.heightInput.value);

                        if (this.uploadedImages.length > 0) {
                            const firstImage = this.uploadedImages[0];
                            const aspectRatio = firstImage.originalWidth / firstImage.originalHeight;

                            if (changedInput === 'width' && width > 0) {
                                this.heightInput.value = Math.round(width / aspectRatio);
                            } else if (changedInput === 'height' && height > 0) {
                                this.widthInput.value = Math.round(height * aspectRatio);
                            }
                        } else {
                            // ì—…ë¡œë“œëœ ì´ë¯¸ì§€ê°€ ì—†ì„ ë•Œ ê¸°ë³¸ ë¹„ìœ¨(1:1) ì ìš©
                            if (changedInput === 'width' && width > 0) {
                                this.heightInput.value = width;
                            } else if (changedInput === 'height' && height > 0) {
                                this.widthInput.value = height;
                            }
                        }

                    }

                    setPresetSize(button) {
                        const width = button.dataset.width;
                        const height = button.dataset.height;
                        this.widthInput.value = width;
                        this.heightInput.value = height;

                        // í”„ë¦¬ì…‹ ë²„íŠ¼ í™œì„±í™” í‘œì‹œ
                        this.presetButtons.forEach(btn => btn.classList.remove('bg-blue-500', 'text-white'));
                        button.classList.add('bg-blue-500', 'text-white');
                    }

                    async resizeAllImages() {
                        if (this.uploadedImages.length === 0) {
                            alert('ë¦¬ì‚¬ì´ì¦ˆí•  ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.');
                            return;
                        }

                        let targetWidth = parseInt(this.widthInput.value);
                        let targetHeight = parseInt(this.heightInput.value);
                        
                        // ë„ˆë¹„ ë˜ëŠ” ë†’ì´ ì¤‘ í•˜ë‚˜ë§Œ ì…ë ¥ëœ ê²½ìš° ê° ì´ë¯¸ì§€ë³„ë¡œ ë¹„ìœ¨ ìœ ì§€í•˜ì—¬ ì²˜ë¦¬
                        const isWidthOnly = targetWidth > 0 && (!targetHeight || targetHeight <= 0);
                        const isHeightOnly = targetHeight > 0 && (!targetWidth || targetWidth <= 0);

                        if ((isWidthOnly || isHeightOnly) && this.maintainRatioCheckbox.checked) {
                            // ê° ì´ë¯¸ì§€ë³„ë¡œ ê°œë³„ ì²˜ë¦¬í•˜ëŠ” ëª¨ë“œ
                            this.resizeBtn.textContent = 'ì²˜ë¦¬ ì¤‘...';
                            this.resizeBtn.disabled = true;
                            this.processedImages = [];
                            
                            for (const imageData of this.uploadedImages) {
                                try {
                                    
                                    const aspectRatio = imageData.originalWidth / imageData.originalHeight;
                                    let individualWidth, individualHeight;

                                    if (isWidthOnly) {
                                        individualWidth = targetWidth;
                                        individualHeight = Math.round(targetWidth / aspectRatio);
                                    } else {
                                        individualHeight = targetHeight;
                                        individualWidth = Math.round(targetHeight * aspectRatio);
                                    }

                                    const resizedImageData = await this.resizeImage(imageData, individualWidth, individualHeight);
                                    this.processedImages.push(resizedImageData);
                                } catch (error) {
                                    console.error('ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì¦ˆ ì‹¤íŒ¨:', error);
                                }
                            }

                            this.renderProcessedImages();
                            this.resizeBtn.textContent = 'ëª¨ë“  ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì¦ˆ';
                            this.resizeBtn.disabled = false;
                            return;
                        }

                        // ê¸°ì¡´ ë¡œì§: ë„ˆë¹„ì™€ ë†’ì´ê°€ ëª¨ë‘ ì§€ì •ëœ ê²½ìš°
                        if (!targetWidth || !targetHeight || targetWidth <= 0 || targetHeight <= 0) {
                            alert('ì˜¬ë°”ë¥¸ í¬ê¸°ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                            return;
                        }

                        this.resizeBtn.textContent = 'ì²˜ë¦¬ ì¤‘...';
                        this.resizeBtn.disabled = true;

                        this.processedImages = [];

                        for (const imageData of this.uploadedImages) {
                            try {
                                const resizedImageData = await this.resizeImage(imageData, targetWidth, targetHeight);
                                this.processedImages.push(resizedImageData);
                            } catch (error) {
                                console.error('ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì¦ˆ ì‹¤íŒ¨:', error);
                            }
                        }

                        this.renderProcessedImages();
                        this.resizeBtn.textContent = 'ëª¨ë“  ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì¦ˆ';
                        this.resizeBtn.disabled = false;
                    }

                    resizeImage(imageData, targetWidth, targetHeight) {
                        return new Promise((resolve) => {
                            const canvas = document.createElement('canvas');
                            const ctx = canvas.getContext('2d');
                            const img = new Image();

                            img.onload = () => {
                                canvas.width = targetWidth;
                                canvas.height = targetHeight;

                                // ë¦¬ì‚¬ì´ì¦ˆ ëª¨ë“œ í™•ì¸
                                const resizeMode = document.querySelector('input[name="resizeMode"]:checked').value;

                                if (resizeMode === 'crop') {
                                    // í¬ë¡­ ëª¨ë“œ: ë¹„ìœ¨ì„ ìœ ì§€í•˜ë©´ì„œ ê°€ìš´ë° ì •ë ¬í•˜ì—¬ í¬ë¡­
                                    const sourceAspectRatio = img.width / img.height;
                                    const targetAspectRatio = targetWidth / targetHeight;

                                    let sourceX = 0;
                                    let sourceY = 0;
                                    let sourceWidth = img.width;
                                    let sourceHeight = img.height;

                                    if (sourceAspectRatio > targetAspectRatio) {
                                        // ì›ë³¸ì´ ë” ë„“ìŒ - ì¢Œìš°ë¥¼ í¬ë¡­
                                        sourceWidth = img.height * targetAspectRatio;
                                        sourceX = (img.width - sourceWidth) / 2;
                                    } else {
                                        // ì›ë³¸ì´ ë” ë†’ìŒ - ìƒí•˜ë¥¼ í¬ë¡­
                                        sourceHeight = img.width / targetAspectRatio;
                                        sourceY = (img.height - sourceHeight) / 2;
                                    }

                                    // í¬ë¡­ëœ ì˜ì—­ì„ ìº”ë²„ìŠ¤ì— ê·¸ë¦¬ê¸°
                                    ctx.drawImage(
                                        img,
                                        sourceX, sourceY, sourceWidth, sourceHeight,
                                        0, 0, targetWidth, targetHeight
                                    );
                                } else {
                                    // ëŠ˜ì´ê¸° ëª¨ë“œ: ì „ì²´ ì´ë¯¸ì§€ë¥¼ íƒ€ê²Ÿ í¬ê¸°ì— ë§ì¶° ëŠ˜ì´ê¸°
                                    ctx.drawImage(img, 0, 0, targetWidth, targetHeight);
                                }

                                // ì´ë¯¸ì§€ í’ˆì§ˆ ì„¤ì • í™•ì¸
                                const imageQuality = document.querySelector('input[name="imageQuality"]:checked').value;
                                let outputFormat, quality, fileExtension;

                                switch (imageQuality) {
                                    case 'high':
                                        outputFormat = 'image/png';
                                        quality = 1.0;
                                        fileExtension = 'png';
                                        break;
                                    case 'web':
                                        outputFormat = 'image/jpeg';
                                        quality = 0.8;
                                        fileExtension = 'jpg';
                                        break;
                                    case 'optimized':
                                        outputFormat = 'image/jpeg';
                                        quality = 0.6;
                                        fileExtension = 'jpg';
                                        break;
                                    default:
                                        outputFormat = 'image/png';
                                        quality = 1.0;
                                        fileExtension = 'png';
                                }

                                // ìº”ë²„ìŠ¤ë¥¼ blobìœ¼ë¡œ ë³€í™˜
                                canvas.toBlob((blob) => {
                                    const resizedImageData = {
                                        id: imageData.id,
                                        src: canvas.toDataURL(outputFormat, quality),
                                        blob: blob,
                                        width: targetWidth,
                                        height: targetHeight,
                                        name: `resized_${imageData.name.split('.')[0]}.${fileExtension}`,
                                        format: outputFormat,
                                        quality: quality
                                    };
                                    resolve(resizedImageData);
                                }, outputFormat, quality);
                            };

                            img.src = imageData.src;
                        });
                    }

                    renderProcessedImages() {
                        this.processedGrid.innerHTML = '';
                        this.processedImages.forEach(imageData => {
                            const imageCard = this.createImageCard(imageData, true);
                            this.processedGrid.appendChild(imageCard);
                        });
                        this.updateUI();
                    }

                    downloadImage(imageData) {
                        const link = document.createElement('a');
                        link.href = imageData.src;
                        link.download = imageData.name;
                        document.body.appendChild(link);
                        link.click();
                        document.body.removeChild(link);
                    }

                    async downloadAllImages() {
                        if (this.processedImages.length === 0) {
                            alert('ë‹¤ìš´ë¡œë“œí•  ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.');
                            return;
                        }

                        try {
                            // ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ ìƒíƒœ ë³€ê²½
                            this.downloadAllBtn.textContent = 'ZIP ìƒì„± ì¤‘...';
                            this.downloadAllBtn.disabled = true;

                            // JSZip ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
                            const zip = new JSZip();

                            // ê° ì´ë¯¸ì§€ë¥¼ ZIPì— ì¶”ê°€
                            for (let i = 0; i < this.processedImages.length; i++) {
                                const imageData = this.processedImages[i];

                                // Canvasì—ì„œ blob ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
                                const response = await fetch(imageData.src);
                                const blob = await response.blob();

                                // íŒŒì¼ëª… ì¤‘ë³µ ë°©ì§€ë¥¼ ìœ„í•´ ì¸ë±ìŠ¤ ì¶”ê°€
                                const fileName = `${i + 1}_${imageData.name}`;
                                zip.file(fileName, blob);
                            }

                            // ZIP íŒŒì¼ ìƒì„±
                            const zipBlob = await zip.generateAsync({type: 'blob'});

                            // ZIP íŒŒì¼ ë‹¤ìš´ë¡œë“œ
                            const link = document.createElement('a');
                            link.href = URL.createObjectURL(zipBlob);
                            link.download = `resized_images_${new Date().getTime()}.zip`;
                            document.body.appendChild(link);
                            link.click();
                            document.body.removeChild(link);

                            // URL ê°ì²´ í•´ì œ
                            URL.revokeObjectURL(link.href);

                        } catch (error) {
                            console.error('ZIP íŒŒì¼ ìƒì„± ì‹¤íŒ¨:', error);
                            alert('ZIP íŒŒì¼ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                        } finally {
                            // ë²„íŠ¼ ìƒíƒœ ë³µì›
                            this.downloadAllBtn.textContent = 'ZIPìœ¼ë¡œ ë‹¤ìš´ë¡œë“œ';
                            this.downloadAllBtn.disabled = false;
                        }
                    }

                    clearAllImages() {
                        if (confirm('ëª¨ë“  ì´ë¯¸ì§€ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                            this.uploadedImages = [];
                            this.processedImages = [];
                            this.renderUploadedImages();
                            this.renderProcessedImages();
                            this.updateUI();
                        }
                    }

                    updateUI() {
                        // ë¯¸ë¦¬ë³´ê¸° ì„¹ì…˜ í‘œì‹œ/ìˆ¨ê¹€
                        if (this.uploadedImages.length > 0) {
                            this.previewSection.classList.remove('hidden');
                        } else {
                            this.previewSection.classList.add('hidden');
                        }

                        // ì²˜ë¦¬ëœ ì´ë¯¸ì§€ ì„¹ì…˜ í‘œì‹œ/ìˆ¨ê¹€
                        if (this.processedImages.length > 0) {
                            this.processedSection.classList.remove('hidden');
                            this.downloadAllBtn.classList.remove('hidden');
                        } else {
                            this.processedSection.classList.add('hidden');
                            this.downloadAllBtn.classList.add('hidden');
                        }
                    }

                    showImagePreview(resizedImageData) {
                        // ì›ë³¸ ì´ë¯¸ì§€ ì°¾ê¸°
                        const originalImage = this.uploadedImages.find(img => img.id === resizedImageData.id);

                        if (!originalImage) {
                            alert('ì›ë³¸ ì´ë¯¸ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                            return;
                        }

                        // í˜„ì¬ ë¯¸ë¦¬ë³´ê¸° ë°ì´í„° ì €ì¥
                        this.currentPreviewData = resizedImageData;

                        // ì›ë³¸ ì´ë¯¸ì§€ ì •ë³´ ì„¤ì •
                        this.originalPreview.src = originalImage.src;
                        this.originalInfo.textContent = `${originalImage.name} (${originalImage.originalWidth} Ã— ${originalImage.originalHeight})`;

                        // ë¦¬ì‚¬ì´ì¦ˆëœ ì´ë¯¸ì§€ ì •ë³´ ì„¤ì •
                        this.resizedPreview.src = resizedImageData.src;
                        this.resizedInfo.textContent = `${resizedImageData.name} (${resizedImageData.width} Ã— ${resizedImageData.height})`;

                        // ëª¨ë‹¬ í‘œì‹œ
                        this.imagePreviewModal.classList.remove('hidden');

                        // ì ‘ê·¼ì„±ì„ ìœ„í•œ í¬ì»¤ìŠ¤ ì„¤ì •
                        this.closeModalBtn.focus();
                    }

                    closePreviewModal() {
                        this.imagePreviewModal.classList.add('hidden');
                    }

                    downloadCurrentPreviewImage() {
                        if (this.currentPreviewData) {
                            const link = document.createElement('a');
                            link.href = this.currentPreviewData.src;
                            link.download = this.currentPreviewData.name;
                            document.body.appendChild(link);
                            link.click();
                            document.body.removeChild(link);
                        }
                    }
                }

                // í˜ì´ì§€ ë¡œë“œ ì‹œ ì¸ë„¤ì¼ í¸ì§‘ê¸° ì´ˆê¸°í™”
                document.addEventListener('DOMContentLoaded', () => {
                    new ThumbnailEditor();
                });

                
            </script>
            
        </div>
    </div>
</x-app-layout>
